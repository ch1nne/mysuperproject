<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${pageTitle}">Default Title</title>
    <meta name="keywords" th:content="${keywords}">
</head>
<body>
<h1>Greetings!</h1>
<h1>Search for Cases</h1>
<form action="/search" method="post">
    <label for="date">Enter Date:</label>
    <input type="text" id="date" name="date" required>
    <button type="submit">Search</button>
</form>

<h2>Search Results:</h2>
<div id="results"></div>

<script th:inline="javascript">
    document.querySelector('form').addEventListener('submit', function(event) {
        event.preventDefault(); // Предотвращаем отправку формы по умолчанию

        var dateInput = document.getElementById('date');
        var date = dateInput.value;

        // Отправка AJAX-запроса на сервер
        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/search');
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xhr.onreadystatechange = function() {
            if (xhr.readyState === 4 && xhr.status === 200) {
                var data = JSON.parse(xhr.responseText);
                displayResults(data); // Отображение результатов
            }
        };
        xhr.send('date=' + encodeURIComponent(date));
    });

    function displayResults(data) {
        var resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = '';
        if (data.length > 0) {
            var ul = document.createElement('ul');
            for (var i = 0; i < data.length; i++) {
                var li = document.createElement('li');
                var a = document.createElement('a');
                a.href = data[i];
                a.textContent = data[i];
                li.appendChild(a);
                ul.appendChild(li);
            }
            resultsDiv.appendChild(ul);
        } else {
            resultsDiv.textContent = 'No results found.';
        }
    }
</script>

</body>
</html>